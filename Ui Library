local NamelessGui = {}
local TweenService = game:GetService('TweenService')
local RunService = game:GetService('RunService')
local UserInputService = game:GetService('UserInputService')
local HttpService = game:GetService('HttpService')

local ScreenGui = Instance.new('ScreenGui')
ScreenGui.Name = 'SyllinseHubGUI'
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild('PlayerGui')

local MainFrame = Instance.new('Frame')
MainFrame.Name = 'MainFrame'
MainFrame.Size = UDim2.new(0, 420, 0, 350)
MainFrame.Position = UDim2.new(0.5, -210, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.new(0.05, 0.05, 0.08)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new('UICorner')
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

local BackgroundPattern = Instance.new('ImageLabel')
BackgroundPattern.Name = 'BackgroundPattern'
BackgroundPattern.Size = UDim2.new(1, 0, 1, 0)
BackgroundPattern.BackgroundTransparency = 1
BackgroundPattern.Image = 'rbxassetid://11543912338'
BackgroundPattern.ImageColor3 = Color3.new(0, 0.2, 0.4)
BackgroundPattern.ImageTransparency = 0.97
BackgroundPattern.ScaleType = Enum.ScaleType.Tile
BackgroundPattern.TileSize = UDim2.new(0, 60, 0, 60)
BackgroundPattern.Parent = MainFrame

local Header = Instance.new('Frame')
Header.Name = 'Header'
Header.Size = UDim2.new(1, 0, 0, 40)
Header.BackgroundColor3 = Color3.new(0.08, 0.08, 0.12)
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new('UICorner')
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = Header

local Title = Instance.new('TextLabel')
Title.Name = 'Title'
Title.Size = UDim2.new(1, -100, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = 'SYLLINSE HUB'
Title.TextColor3 = Color3.new(0, 0.8, 1)
Title.TextSize = 18
Title.Font = Enum.Font.GothamBlack
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

local VersionLabel = Instance.new('TextLabel')
VersionLabel.Name = 'Version'
VersionLabel.Size = UDim2.new(0, 100, 0, 12)
VersionLabel.Position = UDim2.new(0, 15, 0, 22)
VersionLabel.BackgroundTransparency = 1
VersionLabel.Text = 'v2.0.1'
VersionLabel.TextColor3 = Color3.new(0.4, 0.7, 1)
VersionLabel.TextSize = 10
VersionLabel.Font = Enum.Font.Gotham
VersionLabel.TextXAlignment = Enum.TextXAlignment.Left
VersionLabel.Parent = Header

local CloseButton = Instance.new('TextButton')
CloseButton.Name = 'CloseButton'
CloseButton.Size = UDim2.new(0, 28, 0, 28)
CloseButton.Position = UDim2.new(1, -32, 0.5, -14)
CloseButton.BackgroundColor3 = Color3.new(0.12, 0.12, 0.18)
CloseButton.BorderSizePixel = 0
CloseButton.Text = '×'
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.TextSize = 18
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = Header

local CloseCorner = Instance.new('UICorner')
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

local MinimizeButton = Instance.new('TextButton')
MinimizeButton.Name = 'MinimizeButton'
MinimizeButton.Size = UDim2.new(0, 28, 0, 28)
MinimizeButton.Position = UDim2.new(1, -65, 0.5, -14)
MinimizeButton.BackgroundColor3 = Color3.new(0.12, 0.12, 0.18)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Text = '–'
MinimizeButton.TextColor3 = Color3.new(1, 1, 1)
MinimizeButton.TextSize = 16
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Parent = Header

local MinimizeCorner = Instance.new('UICorner')
MinimizeCorner.CornerRadius = UDim.new(0, 8)
MinimizeCorner.Parent = MinimizeButton

local MainContent = Instance.new('Frame')
MainContent.Name = 'MainContent'
MainContent.Size = UDim2.new(1, 0, 1, -40)
MainContent.Position = UDim2.new(0, 0, 0, 40)
MainContent.BackgroundTransparency = 1
MainContent.Parent = MainFrame

local TabContainer = Instance.new('ScrollingFrame')
TabContainer.Name = 'TabContainer'
TabContainer.Size = UDim2.new(0, 90, 1, -10)
TabContainer.Position = UDim2.new(0, 8, 0, 8)
TabContainer.BackgroundColor3 = Color3.new(0.08, 0.08, 0.12)
TabContainer.BorderSizePixel = 0
TabContainer.ScrollBarThickness = 3
TabContainer.ScrollBarImageColor3 = Color3.new(0, 0.8, 1)
TabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
TabContainer.Parent = MainContent

local TabContainerCorner = Instance.new('UICorner')
TabContainerCorner.CornerRadius = UDim.new(0, 8)
TabContainerCorner.Parent = TabContainer

local TabListLayout = Instance.new('UIListLayout')
TabListLayout.Padding = UDim.new(0, 6)
TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
TabListLayout.Parent = TabContainer

local ContentContainer = Instance.new('Frame')
ContentContainer.Name = 'ContentContainer'
ContentContainer.Size = UDim2.new(1, -105, 1, -10)
ContentContainer.Position = UDim2.new(0, 100, 0, 8)
ContentContainer.BackgroundColor3 = Color3.new(0.08, 0.08, 0.12)
ContentContainer.BorderSizePixel = 0
ContentContainer.Parent = MainContent

local ContentCorner = Instance.new('UICorner')
ContentCorner.CornerRadius = UDim.new(0, 8)
ContentCorner.Parent = ContentContainer

local ContentScroll = Instance.new('ScrollingFrame')
ContentScroll.Name = 'ContentScroll'
ContentScroll.Size = UDim2.new(1, -10, 1, -10)
ContentScroll.Position = UDim2.new(0, 5, 0, 5)
ContentScroll.BackgroundTransparency = 1
ContentScroll.ScrollBarThickness = 3
ContentScroll.ScrollBarImageColor3 = Color3.new(0, 0.8, 1)
ContentScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
ContentScroll.Parent = ContentContainer

local ContentLayout = Instance.new('UIListLayout')
ContentLayout.Padding = UDim.new(0, 8)
ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
ContentLayout.Parent = ContentScroll

local NeonGlow = Instance.new('UIStroke')
NeonGlow.Name = 'NeonGlow'
NeonGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
NeonGlow.Color = Color3.new(0, 0.8, 1)
NeonGlow.Thickness = 2.5
NeonGlow.Transparency = 0.1
NeonGlow.Parent = MainFrame

local HeaderGlow = Instance.new('UIStroke')
HeaderGlow.Name = 'HeaderGlow'
HeaderGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
HeaderGlow.Color = Color3.new(0, 0.8, 1)
HeaderGlow.Thickness = 2
NeonGlow.Transparency = 0.2
HeaderGlow.Parent = Header

local TabContainerGlow = Instance.new('UIStroke')
TabContainerGlow.Name = 'TabContainerGlow'
TabContainerGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
TabContainerGlow.Color = Color3.new(0, 0.8, 1)
TabContainerGlow.Thickness = 2
TabContainerGlow.Transparency = 0.3
TabContainerGlow.Parent = TabContainer

local ContentGlow = Instance.new('UIStroke')
ContentGlow.Name = 'ContentGlow'
ContentGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
ContentGlow.Color = Color3.new(0, 0.8, 1)
ContentGlow.Thickness = 2
ContentGlow.Transparency = 0.3
ContentGlow.Parent = ContentContainer

NamelessGui.Tabs = {}
NamelessGui.CurrentTab = nil
NamelessGui.Enabled = true
NamelessGui.ButtonStates = {}
NamelessGui.KeybindButtons = {}

local neonTime = 0
local neonConnections = {}

local function saveKeybinds()
    if not writefile then
        return
    end
    local keybindData = {}
    for buttonName, keybindInfo in pairs(NamelessGui.KeybindButtons) do
        keybindData[buttonName] = keybindInfo.currentKey
    end
    pcall(function()
        writefile('syllinse_keybinds.json', HttpService:JSONEncode(keybindData))
    end)
end

local function loadKeybinds()
    if not readfile or not isfile or not isfile('syllinse_keybinds.json') then
        return
    end
    pcall(function()
        local data = HttpService:JSONDecode(readfile('syllinse_keybinds.json'))
        for buttonName, key in pairs(data) do
            if NamelessGui.KeybindButtons[buttonName] then
                NamelessGui.KeybindButtons[buttonName].currentKey = key
                NamelessGui.KeybindButtons[buttonName].keybindButton.Text = key
            end
        end
    end)
end

local function updateKeybind(buttonName, newKey)
    if NamelessGui.KeybindButtons[buttonName] then
        NamelessGui.KeybindButtons[buttonName].currentKey = newKey
        NamelessGui.KeybindButtons[buttonName].keybindButton.Text = newKey
        saveKeybinds()
    end
end

local function createAnimatedNeonText(parent, text, size, position)
    local NeonText = Instance.new('TextLabel')
    NeonText.Name = 'AnimatedNeonText'
    NeonText.Size = size or UDim2.new(1, -20, 0, 40)
    NeonText.Position = position or UDim2.new(0, 10, 0, 5)
    NeonText.BackgroundTransparency = 1
    NeonText.Text = text
    NeonText.TextColor3 = Color3.new(0, 0.8, 1)
    NeonText.TextSize = 16
    NeonText.Font = Enum.Font.GothamBlack
    NeonText.TextXAlignment = Enum.TextXAlignment.Center
    NeonText.TextYAlignment = Enum.TextYAlignment.Center
    NeonText.Parent = parent

    local TextGlow = Instance.new('UIStroke')
    TextGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    TextGlow.Color = Color3.new(0.2, 0.8, 1)
    TextGlow.Thickness = 2
    TextGlow.Transparency = 0.3
    TextGlow.Parent = NeonText

    table.insert(neonConnections, { text = NeonText, glow = TextGlow })

    return NeonText
end

local function animateNeon()
    neonTime = neonTime + 0.03
    local bluePulse = math.sin(neonTime) * 0.2 + 0.8
    local cyanPulse = math.sin(neonTime + math.pi / 2) * 0.3 + 0.7

    for _, neonObj in pairs(neonConnections) do
        if neonObj.text and neonObj.text.Parent then
            neonObj.text.TextColor3 = Color3.new(0, bluePulse, 1)
            if neonObj.glow then
                neonObj.glow.Color = Color3.new(0.2, cyanPulse, 1)
            end
        end
    end

    NeonGlow.Color = Color3.new(0, bluePulse, 1)
    HeaderGlow.Color = Color3.new(0, bluePulse, 1)
    TabContainerGlow.Color = Color3.new(0, bluePulse, 1)
    ContentGlow.Color = Color3.new(0, bluePulse, 1)
end

RunService.Heartbeat:Connect(animateNeon)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    for _, conn in pairs(neonConnections) do
        if conn.text then
            conn.text:Destroy()
        end
    end
    neonConnections = {}
end)

local minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        TweenService:Create(
            MainFrame,
            TweenInfo.new(0.3),
            { Size = UDim2.new(0, 420, 0, 40) }
        ):Play()
        MainContent.Visible = false
    else
        TweenService:Create(
            MainFrame,
            TweenInfo.new(0.3),
            { Size = UDim2.new(0, 420, 0, 350) }
        ):Play()
        MainContent.Visible = true
    end
end)

local dragging = false
local dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(
        startPos.X.Scale,
        startPos.X.Offset + delta.X,
        startPos.Y.Scale,
        startPos.Y.Offset + delta.Y
    )
end

Header.InputBegan:Connect(function(input)
    if
        input.UserInputType == Enum.UserInputType.MouseButton1
        or input.UserInputType == Enum.UserInputType.Touch
    then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Header.InputChanged:Connect(function(input)
    if
        input.UserInputType == Enum.UserInputType.MouseMovement
        or input.UserInputType == Enum.UserInputType.Touch
    then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

function NamelessGui:CreateTab(tabName, tabIcon)
    local Tab = {}
    Tab.Name = tabName

    local TabButton = Instance.new('TextButton')
    TabButton.Name = tabName .. 'Tab'
    TabButton.Size = UDim2.new(1, -8, 0, 55)
    TabButton.BackgroundColor3 = Color3.new(0.1, 0.1, 0.15)
    TabButton.BorderSizePixel = 0
    TabButton.Text = ''
    TabButton.LayoutOrder = #self.Tabs
    TabButton.Parent = TabContainer

    local TabCorner = Instance.new('UICorner')
    TabCorner.CornerRadius = UDim.new(0, 6)
    TabCorner.Parent = TabButton

    local TabGlow = Instance.new('UIStroke')
    TabGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    TabGlow.Color = Color3.new(0.2, 0.5, 0.8)
    TabGlow.Thickness = 1.5
    TabGlow.Transparency = 0.7
    TabGlow.Parent = TabButton

    local TabIconLabel = Instance.new('TextLabel')
    TabIconLabel.Name = 'Icon'
    TabIconLabel.Size = UDim2.new(1, 0, 0, 28)
    TabIconLabel.Position = UDim2.new(0, 0, 0, 3)
    TabIconLabel.BackgroundTransparency = 1
    TabIconLabel.Text = tabIcon or '?'
    TabIconLabel.TextColor3 = Color3.new(0.5, 0.7, 1)
    TabIconLabel.TextSize = 16
    TabIconLabel.Font = Enum.Font.GothamBold
    TabIconLabel.Parent = TabButton

    local TabNameLabel = Instance.new('TextLabel')
    TabNameLabel.Name = 'Name'
    TabNameLabel.Size = UDim2.new(1, 0, 0, 18)
    TabNameLabel.Position = UDim2.new(0, 0, 0, 32)
    TabNameLabel.BackgroundTransparency = 1
    TabNameLabel.Text = tabName
    TabNameLabel.TextColor3 = Color3.new(0.5, 0.7, 1)
    TabNameLabel.TextSize = 10
    TabNameLabel.Font = Enum.Font.Gotham
    TabNameLabel.Parent = TabButton

    local TabFrame = Instance.new('Frame')
    TabFrame.Name = tabName .. 'Content'
    TabFrame.Size = UDim2.new(1, 0, 0, 0)
    TabFrame.BackgroundTransparency = 1
    TabFrame.Visible = false
    TabFrame.LayoutOrder = 1
    TabFrame.Parent = ContentScroll

    local TabFrameLayout = Instance.new('UIListLayout')
    TabFrameLayout.Padding = UDim.new(0, 8)
    TabFrameLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabFrameLayout.Parent = TabFrame

    TabFrameLayout:GetPropertyChangedSignal('AbsoluteContentSize')
        :Connect(function()
            TabFrame.Size =
                UDim2.new(1, 0, 0, TabFrameLayout.AbsoluteContentSize.Y)
        end)

    createAnimatedNeonText(
        TabFrame,
        'SYLLINSE HUB',
        UDim2.new(1, -20, 0, 38),
        UDim2.new(0, 10, 0, 5)
    )

    TabContainer.CanvasSize =
        UDim2.new(0, 0, 0, TabListLayout.AbsoluteContentSize.Y)

    TabButton.MouseButton1Click:Connect(function()
        self:SwitchTab(tabName)
    end)

    TabButton.MouseEnter:Connect(function()
        if self.CurrentTab ~= tabName then
            TweenService:Create(
                TabButton,
                TweenInfo.new(0.2),
                { BackgroundColor3 = Color3.new(0.15, 0.15, 0.22) }
            ):Play()
            TweenService:Create(
                TabIconLabel,
                TweenInfo.new(0.2),
                { TextColor3 = Color3.new(0, 0.9, 1) }
            ):Play()
            TweenService:Create(
                TabNameLabel,
                TweenInfo.new(0.2),
                { TextColor3 = Color3.new(0, 0.9, 1) }
            ):Play()
        end
    end)

    TabButton.MouseLeave:Connect(function()
        if self.CurrentTab ~= tabName then
            TweenService:Create(
                TabButton,
                TweenInfo.new(0.2),
                { BackgroundColor3 = Color3.new(0.1, 0.1, 0.15) }
            ):Play()
            TweenService:Create(
                TabIconLabel,
                TweenInfo.new(0.2),
                { TextColor3 = Color3.new(0.5, 0.7, 1) }
            ):Play()
            TweenService:Create(
                TabNameLabel,
                TweenInfo.new(0.2),
                { TextColor3 = Color3.new(0.5, 0.7, 1) }
            ):Play()
        end
    end)

    if #self.Tabs == 0 then
        self:SwitchTab(tabName)
    end

    table.insert(self.Tabs, Tab)
    return Tab
end

function NamelessGui:SwitchTab(tabName)
    for _, tab in pairs(self.Tabs) do
        local tabFrame = ContentScroll:FindFirstChild(tab.Name .. 'Content')
        if tabFrame then
            tabFrame.Visible = false
        end
    end

    local selectedFrame = ContentScroll:FindFirstChild(tabName .. 'Content')
    if selectedFrame then
        selectedFrame.Visible = true
    end

    for _, child in pairs(TabContainer:GetChildren()) do
        if child:IsA('TextButton') then
            local icon = child:FindFirstChild('Icon')
            local nameLabel = child:FindFirstChild('Name')

            if child.Name:match(tabName) then
                TweenService:Create(
                    child,
                    TweenInfo.new(0.3),
                    { BackgroundColor3 = Color3.new(0, 0.6, 1) }
                ):Play()
                if icon then
                    TweenService:Create(
                        icon,
                        TweenInfo.new(0.3),
                        { TextColor3 = Color3.new(1, 1, 1) }
                    ):Play()
                end
                if nameLabel then
                    TweenService:Create(
                        nameLabel,
                        TweenInfo.new(0.3),
                        { TextColor3 = Color3.new(1, 1, 1) }
                    ):Play()
                end
            else
                TweenService
                    :Create(
                        child,
                        TweenInfo.new(0.3),
                        { BackgroundColor3 = Color3.new(0.1, 0.1, 0.15) }
                    )
                    :Play()
                if icon then
                    TweenService
                        :Create(
                            icon,
                            TweenInfo.new(0.3),
                            { TextColor3 = Color3.new(0.5, 0.7, 1) }
                        )
                        :Play()
                end
                if nameLabel then
                    TweenService
                        :Create(
                            nameLabel,
                            TweenInfo.new(0.3),
                            { TextColor3 = Color3.new(0.5, 0.7, 1) }
                        )
                        :Play()
                end
            end
        end
    end

    self.CurrentTab = tabName
    ContentScroll.CanvasSize =
        UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
end

function NamelessGui:CreateToggle(tab, toggleName, defaultKey, callback)
    local toggleFrame = ContentScroll:FindFirstChild(tab.Name .. 'Content')
    if not toggleFrame then
        return
    end

    local ToggleContainer = Instance.new('Frame')
    ToggleContainer.Name = toggleName .. 'Toggle'
    ToggleContainer.Size = UDim2.new(1, -20, 0, 36)
    ToggleContainer.BackgroundTransparency = 1
    ToggleContainer.LayoutOrder = #toggleFrame:GetChildren()
    ToggleContainer.Parent = toggleFrame

    local ToggleButton = Instance.new('TextButton')
    ToggleButton.Name = 'Toggle'
    ToggleButton.Size = UDim2.new(0.7, -8, 1, 0)
    ToggleButton.Position = UDim2.new(0, 0, 0, 0)
    ToggleButton.BackgroundColor3 = Color3.new(0.1, 0.1, 0.15)
    ToggleButton.BorderSizePixel = 0
    ToggleButton.Text = toggleName
    ToggleButton.TextColor3 = Color3.new(0.8, 0.9, 1)
    ToggleButton.TextSize = 12
    ToggleButton.Font = Enum.Font.Gotham
    ToggleButton.Parent = ToggleContainer

    local ToggleCorner = Instance.new('UICorner')
    ToggleCorner.CornerRadius = UDim.new(0, 6)
    ToggleCorner.Parent = ToggleButton

    local ToggleGlow = Instance.new('UIStroke')
    ToggleGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    ToggleGlow.Color = Color3.new(0.2, 0.5, 0.8)
    ToggleGlow.Thickness = 1.5
    ToggleGlow.Transparency = 0.7
    ToggleGlow.Parent = ToggleButton

    local KeybindButton = Instance.new('TextButton')
    KeybindButton.Name = 'Keybind'
    KeybindButton.Size = UDim2.new(0.3, 0, 1, 0)
    KeybindButton.Position = UDim2.new(0.7, 8, 0, 0)
    KeybindButton.BackgroundColor3 = Color3.new(0.08, 0.08, 0.12)
    KeybindButton.BorderSizePixel = 0
    KeybindButton.Text = defaultKey or 'NONE'
    KeybindButton.TextColor3 = Color3.new(0.6, 0.8, 1)
    KeybindButton.TextSize = 10
    KeybindButton.Font = Enum.Font.Gotham
    KeybindButton.Parent = ToggleContainer

    local KeybindCorner = Instance.new('UICorner')
    KeybindCorner.CornerRadius = UDim.new(0, 6)
    KeybindCorner.Parent = KeybindButton

    local KeybindGlow = Instance.new('UIStroke')
    KeybindGlow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    KeybindGlow.Color = Color3.new(0.2, 0.5, 0.8)
    KeybindGlow.Thickness = 1.5
    KeybindGlow.Transparency = 0.7
    KeybindGlow.Parent = KeybindButton

    self.ButtonStates[toggleName] = false
    self.KeybindButtons[toggleName] = {
        keybindButton = KeybindButton,
        currentKey = defaultKey or 'NONE',
        callback = callback,
    }

    local listening = false
    KeybindButton.MouseButton1Click:Connect(function()
        listening = true
        KeybindButton.Text = '...'
        KeybindButton.BackgroundColor3 = Color3.new(0.15, 0.15, 0.22)

        local connection
        connection = UserInputService.InputBegan:Connect(
            function(input, gameProcessed)
                if gameProcessed then
                    return
                end

                if input.UserInputType == Enum.UserInputType.Keyboard then
                    local key = input.KeyCode.Name
                    updateKeybind(toggleName, key)
                    listening = false
                    KeybindButton.BackgroundColor3 =
                        Color3.new(0.08, 0.08, 0.12)
                    connection:Disconnect()
                elseif input.UserInputType == Enum.UserInputType.Touch then
                    KeybindButton.Text = 'TAP'
                    updateKeybind(toggleName, 'TAP')
                    listening = false
                    KeybindButton.BackgroundColor3 =
                        Color3.new(0.08, 0.08, 0.12)
                    connection:Disconnect()
                end
            end
        )
    end)

    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then
            return
        end

        if input.UserInputType == Enum.UserInputType.Keyboard then
            local pressedKey = input.KeyCode.Name
            if
                self.KeybindButtons[toggleName]
                and self.KeybindButtons[toggleName].currentKey == pressedKey
            then
                self.ButtonStates[toggleName] =
                    not self.ButtonStates[toggleName]

                local targetColor = self.ButtonStates[toggleName]
                        and Color3.new(0, 0.6, 1)
                    or Color3.new(0.1, 0.1, 0.15)
                local targetGlow = self.ButtonStates[toggleName]
                        and Color3.new(0, 0.9, 1)
                    or Color3.new(0.2, 0.5, 0.8)

                TweenService:Create(
                    ToggleButton,
                    TweenInfo.new(0.2),
                    { BackgroundColor3 = targetColor }
                ):Play()
                TweenService
                    :Create(
                        ToggleGlow,
                        TweenInfo.new(0.2),
                        { Color = targetGlow }
                    )
                    :Play()

                if callback then
                    callback(self.ButtonStates[toggleName])
                end
            end
        end
    end)

    ToggleButton.MouseButton1Click:Connect(function()
        self.ButtonStates[toggleName] = not self.ButtonStates[toggleName]

        local targetColor = self.ButtonStates[toggleName]
                and Color3.new(0, 0.6, 1)
            or Color3.new(0.1, 0.1, 0.15)
        local targetGlow = self.ButtonStates[toggleName]
                and Color3.new(0, 0.9, 1)
            or Color3.new(0.2, 0.5, 0.8)

        TweenService:Create(
            ToggleButton,
            TweenInfo.new(0.2),
            { BackgroundColor3 = targetColor }
        ):Play()
        TweenService
            :Create(ToggleGlow, TweenInfo.new(0.2), { Color = targetGlow })
            :Play()

        if callback then
            callback(self.ButtonStates[toggleName])
        end
    end)

    ToggleButton.MouseEnter:Connect(function()
        if not self.ButtonStates[toggleName] then
            TweenService:Create(
                ToggleButton,
                TweenInfo.new(0.15),
                { BackgroundColor3 = Color3.new(0.15, 0.15, 0.22) }
            ):Play()
        end
    end)

    ToggleButton.MouseLeave:Connect(function()
        if not self.ButtonStates[toggleName] then
            TweenService:Create(
                ToggleButton,
                TweenInfo.new(0.15),
                { BackgroundColor3 = Color3.new(0.1, 0.1, 0.15) }
            ):Play()
        end
    end)

    KeybindButton.MouseEnter:Connect(function()
        if not listening then
            TweenService:Create(
                KeybindButton,
                TweenInfo.new(0.15),
                { BackgroundColor3 = Color3.new(0.12, 0.12, 0.18) }
            ):Play()
        end
    end)

    KeybindButton.MouseLeave:Connect(function()
        if not listening then
            TweenService:Create(
                KeybindButton,
                TweenInfo.new(0.15),
                { BackgroundColor3 = Color3.new(0.08, 0.08, 0.12) }
            ):Play()
        end
    end)
end

ContentLayout:GetPropertyChangedSignal('AbsoluteContentSize'):Connect(function()
    ContentScroll.CanvasSize =
        UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
end)

TabListLayout:GetPropertyChangedSignal('AbsoluteContentSize'):Connect(function()
    TabContainer.CanvasSize =
        UDim2.new(0, 0, 0, TabListLayout.AbsoluteContentSize.Y)
end)

loadKeybinds()

return NamelessGui
